{"ast":null,"code":"/*global chrome*/ /* src/content.js */import React,{useState,useEffect}from\"react\";import ReactDOM from\"react-dom\";import Frame,{FrameContextConsumer}from\"react-frame-component\";import Popup from\"./Popup\";import\"./content.css\";var Main=function Main(){return/*#__PURE__*/React.createElement(Frame,{head:[/*#__PURE__*/React.createElement(\"link\",{type:\"text/css\",rel:\"stylesheet\",href:chrome.runtime.getURL(\"/static/css/content.css\")})]},/*#__PURE__*/React.createElement(FrameContextConsumer,null,// Callback is invoked with iframe's window and document instances\nfunction(_ref){var document=_ref.document,window=_ref.window;// Render Children\nreturn/*#__PURE__*/React.createElement(\"div\",{className:\"popup\"},/*#__PURE__*/React.createElement(Popup,null));}));};var app=document.createElement(\"div\");app.id=\"my-extension-root\";document.body.appendChild(app);ReactDOM.render(/*#__PURE__*/React.createElement(Main,null),app);app.style.display=\"none\";chrome.runtime.onMessage.addListener(function(request,sender,sendResponse){if(request.message===\"clicked_browser_action\"){toggle();}});function toggle(){if(app.style.display===\"none\"){app.style.display=\"block\";}else{app.style.display=\"none\";}}var axios=require('axios').default;var website_url=document.URL;var testSiteUrl='https://securesurf-backend.herokuapp.com/url_analysis';var data={user_email:\"email@email.com\",url:website_url};var tabStartTime=0;var tabEndTime=0;var grabUrl=function grabUrl(){tabStartTime=Date.now();console.log(tabStartTime);console.log(website_url);fetch(testSiteUrl,{method:'POST',body:JSON.stringify(data),// body data type must match \"Content-Type\" header\nmode:'cors',// no-cors, *cors, same-origin\nheaders:{'Content-Type':'application/json','Accept':'application/json'}}).then(function(res){return res.json();}).then(function(x){return console.log(x);});};var endTime=function endTime(){tabEndTime=Date.now();console.log(tabEndTime);var timeOnSite=tabEndTime-tabStartTime;console.log(timeOnSite);fetch('https://securesurf-backend.herokuapp.com/feed_data',{method:\"POSt\",body:JSON.stringify({user_email:\"email@email.com\",url:website_url,time_ms:timeOnSite}),headers:{\"Content-type\":\"application/json;\"}}).then(function(res){return res.json();}).then(function(json){return console.log(json);});debugger;};window.addEventListener('load',grabUrl);window.addEventListener('beforeunload',endTime);","map":{"version":3,"sources":["/Users/danielcooper/Development/code/hackathon/securesurf_frontend/Extension/SecureSurfExtension/src/content.js"],"names":["React","useState","useEffect","ReactDOM","Frame","FrameContextConsumer","Popup","Main","chrome","runtime","getURL","document","window","app","createElement","id","body","appendChild","render","style","display","onMessage","addListener","request","sender","sendResponse","message","toggle","axios","require","default","website_url","URL","testSiteUrl","data","user_email","url","tabStartTime","tabEndTime","grabUrl","Date","now","console","log","fetch","method","JSON","stringify","mode","headers","then","res","json","x","endTime","timeOnSite","time_ms","addEventListener"],"mappings":"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","sourcesContent":["/*global chrome*/\n/* src/content.js */\n\nimport React, {useState, useEffect} from \"react\";\nimport ReactDOM from \"react-dom\";\nimport Frame, { FrameContextConsumer } from \"react-frame-component\";\nimport Popup from \"./Popup\";\nimport \"./content.css\";\n\nconst Main = () => {\n\n  \n  return (\n    <Frame\n      head={[\n        <link\n          type=\"text/css\"\n          rel=\"stylesheet\"\n          href={chrome.runtime.getURL(\"/static/css/content.css\")}\n        ></link>,\n      ]}\n    >\n      \n      <FrameContextConsumer>\n        {\n          // Callback is invoked with iframe's window and document instances\n          ({ document, window }) => {\n            // Render Children\n            return (\n              <div className={\"popup\"}>\n                  {<Popup/>}\n              </div>\n            );\n          }\n        }\n      </FrameContextConsumer>\n    </Frame>\n  );\n};\n\nconst app = document.createElement(\"div\");\napp.id = \"my-extension-root\";\n\ndocument.body.appendChild(app);\nReactDOM.render(<Main />, app);\n\napp.style.display = \"none\";\nchrome.runtime.onMessage.addListener(function (request, sender, sendResponse) {\n  if (request.message === \"clicked_browser_action\") {\n    toggle();\n  }\n});\nfunction toggle() {\n  if (app.style.display === \"none\") {\n    app.style.display = \"block\";\n  } else {\n    app.style.display = \"none\";\n  }\n}\nconst axios = require('axios').default;\nlet website_url = document.URL;\nlet testSiteUrl = 'https://securesurf-backend.herokuapp.com/url_analysis'\n\nconst data = {\n  user_email: \"email@email.com\",\n  url: website_url\n}\nlet tabStartTime = 0;\nlet tabEndTime = 0;\n\nlet grabUrl = () => {\n  tabStartTime = Date.now();\n  console.log(tabStartTime)\n  console.log(website_url);\n\n  fetch(testSiteUrl, {\n    method: 'POST',\n    body: JSON.stringify(data),// body data type must match \"Content-Type\" header\n    mode: 'cors', // no-cors, *cors, same-origin\n    headers : { \n      'Content-Type': 'application/json',\n      'Accept': 'application/json'\n    }\n  })\n  .then(res => res.json())\n  .then(x => console.log(x))\n}\n\nlet endTime = () => {\n  tabEndTime = Date.now();\n  console.log(tabEndTime)\n  let timeOnSite = tabEndTime - tabStartTime;\n  console.log(timeOnSite)\n\n  fetch('https://securesurf-backend.herokuapp.com/feed_data', {\n    method: \"POSt\",\n    body: JSON.stringify({\n      user_email: \"email@email.com\",\n      url: website_url,\n      time_ms: timeOnSite\n    }),\n    headers: {\n      \"Content-type\": \"application/json;\"\n    }\n  })\n  .then(res => res.json())\n  .then(json => console.log(json))\n  debugger\n}\n\nwindow.addEventListener('load', grabUrl);\nwindow.addEventListener('beforeunload', endTime)\n"]},"metadata":{},"sourceType":"module"}